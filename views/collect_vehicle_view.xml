<odoo>

<!-- Inherit the original vehicle form view -->
    <record id="collect_vehicle_form_inherit" model="ir.ui.view">
        <field name="name">fleet.vehicle.form.traccar</field>
        <field name="model">fleet.vehicle</field>
        <field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/header" position="inside">
                <button name="action_sync_traccar_device"
                        type="object"
                        string="Sync with Traccar"
                        class="btn-primary"
                        icon="fa-car"
                        invisible="traccar_unique_id == False"/>
            </xpath>
                <xpath expr="//field[@name='location']" position="after">
                <field name="capacity_kg"/>
            </xpath>
            <!-- Insert before existing notebook -->
            <xpath expr="//sheet/notebook" position="before">
                <group string="Traccar Details">
                    <field name="traccar_unique_id" placeholder="Auto-generated if empty" required="1"/>
                </group>
            </xpath>
            <xpath expr="//form/sheet/notebook" position="inside">
                <page string="Traccar Device Details">
                    <group string="Device Info">
                        <field name="traccar_device_id" readonly="1"/>
                        <field name="traccar_name" readonly="1"/>
                        <field name="traccar_status" readonly="1"/>
                        <field name="traccar_unique_id" readonly="1"/>
                        <field name="traccar_position_id" readonly="1"/>
                    </group>

                    <group string="Driver Info">
                        <field name="traccar_driver_name" readonly="1"/>
                    </group>

                    <group string="Position Info">
                        <field name="traccar_latitude" readonly="1"/>
                        <field name="traccar_longitude" readonly="1"/>
                        <field name="traccar_altitude" readonly="1"/>
                        <field name="traccar_speed" readonly="1"/>
                        <field name="traccar_accuracy" readonly="1"/>
                        <field name="traccar_distance" readonly="1"/>
                        <field name="traccar_total_distance" readonly="1"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
    
    <record id="action_collect_vehicle" model="ir.actions.act_window">
        <field name="name">Vehicles</field>
        <field name="res_model">fleet.vehicle</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="view_id" ref="fleet.fleet_vehicle_view_kanban"/>
    </record>

</odoo>